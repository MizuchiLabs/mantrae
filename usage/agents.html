<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-usage/agents" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Agents | Mantrae</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://mizuchi.dev/mantrae/usage/agents"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Agents | Mantrae"><meta data-rh="true" name="description" content="Agents in Mantrae extend your Traefik setup by enabling automatic configuration discovery from remote Docker hosts. Instead of manually defining routers in the web UI, you can label your containers with standard Traefik labels, and the agent will automatically synchronize this information with your Mantrae server."><meta data-rh="true" property="og:description" content="Agents in Mantrae extend your Traefik setup by enabling automatic configuration discovery from remote Docker hosts. Instead of manually defining routers in the web UI, you can label your containers with standard Traefik labels, and the agent will automatically synchronize this information with your Mantrae server."><link data-rh="true" rel="icon" href="/mantrae/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://mizuchi.dev/mantrae/usage/agents"><link data-rh="true" rel="alternate" href="https://mizuchi.dev/mantrae/usage/agents" hreflang="en"><link data-rh="true" rel="alternate" href="https://mizuchi.dev/mantrae/usage/agents" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Agents","item":"https://mizuchi.dev/mantrae/usage/agents"}]}</script><link rel="stylesheet" href="/mantrae/assets/css/styles.91f811ff.css">
<script src="/mantrae/assets/js/runtime~main.0af45dc8.js" defer="defer"></script>
<script src="/mantrae/assets/js/main.659a81e9.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_t8Te" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="theme-announcement-bar announcementBar_K8ym" style="background-color:var(--ifm-color-primary);color:var(--ifm-color-white)" role="banner"><div class="announcementBarPlaceholder_Etkn"></div><div class="content_RXIE announcementBarContent_SQOS">If you like Mantrae, <a href="https://github.com/mizuchilabs/mantrae" rel="noopener noreferrer" target="_blank">give us a star on GitHub</a>! ⭐️</div><button type="button" aria-label="Close" class="clean-btn close closeButton_Q0h0 announcementBarClose__Jj4"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/mantrae/"><div class="navbar__logo"><img src="/mantrae/img/logo.svg" alt="Mantrae Logo" class="themedComponent_WGWX themedComponent--light_EWze"><img src="/mantrae/img/logo.svg" alt="Mantrae Logo" class="themedComponent_WGWX themedComponent--dark_TWd2"></div><b class="navbar__title text--truncate">Mantrae</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/mantrae/intro">Docs</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/mizuchilabs/mantrae" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a href="https://buymeacoffee.com/d34dscene" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-coffee-link" aria-label="Support the project"></a><div class="toggle_nazm colorModeToggle_w1I4"><button class="clean-btn toggleButton_aQFr toggleButtonDisabled_GUir" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_si3M lightToggleIcon_rD6m"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_si3M darkToggleIcon_G7po"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_si3M systemToggleIcon_J5WT"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_hQYz"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_MomY"><div class="docsWrapper_OorR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_ZYlH" type="button"></button><div class="docRoot_YVhN"><aside class="theme-doc-sidebar-container docSidebarContainer_JQ5_"><div class="sidebarViewport_UIOM"><div class="sidebar_MMsP"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_IQOO menuWithAnnouncementBar_K0xk"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/mantrae/intro">Welcome to Mantrae</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/mantrae/quickstart">Quick Start</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/mantrae/installation">Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/mantrae/faq">FAQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/mantrae/api">API Reference</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/mantrae/usage/profiles">Usage</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mantrae/usage/profiles">Profiles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mantrae/usage/dns">DNS Providers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/mantrae/usage/agents">Agents</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mantrae/usage/environment">Environment Variables</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mantrae/usage/backups">Backups &amp; Restoration</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_qEP4"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_oq1U"><div class="docItemContainer_Z7tD"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Umh8" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/mantrae/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_v5RZ"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Usage</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Agents</span></li></ul></nav><div class="tocCollapsible_VvoY theme-doc-toc-mobile tocMobile_TrO8"><button type="button" class="clean-btn tocCollapsibleButton_U1bJ">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Agents</h1></header>
<p>Agents in Mantrae extend your Traefik setup by enabling automatic configuration discovery from remote Docker hosts. Instead of manually defining routers in the web UI, you can label your containers with standard Traefik labels, and the agent will automatically synchronize this information with your Mantrae server.</p>
<h2 class="anchor anchorWithStickyNavbar_PMiz" id="how-agents-work">How Agents Work<a href="#how-agents-work" class="hash-link" aria-label="Direct link to How Agents Work" title="Direct link to How Agents Work">​</a></h2>
<p>An agent is a lightweight binary that runs on any machine where you want to manage Docker containers. Each agent:</p>
<ul>
<li>Discovers Docker containers and their Traefik labels on the local machine</li>
<li>Communicates with the Mantrae server to synchronize container information</li>
<li>Automatically creates routers, services, and middlewares based on container labels</li>
<li>Updates the Mantrae server when containers are added, removed, or changed</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_PMiz" id="setting-up-an-agent">Setting Up an Agent<a href="#setting-up-an-agent" class="hash-link" aria-label="Direct link to Setting Up an Agent" title="Direct link to Setting Up an Agent">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_PMiz" id="step-1-create-an-agent-in-mantrae">Step 1: Create an Agent in Mantrae<a href="#step-1-create-an-agent-in-mantrae" class="hash-link" aria-label="Direct link to Step 1: Create an Agent in Mantrae" title="Direct link to Step 1: Create an Agent in Mantrae">​</a></h3>
<ol>
<li>Log into the Mantrae web interface</li>
<li>Navigate to the &quot;Agents&quot; section</li>
<li>Click &quot;Add Agent&quot;</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_PMiz" id="step-2-copy-the-agent-token">Step 2: Copy the Agent Token<a href="#step-2-copy-the-agent-token" class="hash-link" aria-label="Direct link to Step 2: Copy the Agent Token" title="Direct link to Step 2: Copy the Agent Token">​</a></h3>
<p>After creating the agent, you&#x27;ll see a configuration section with:</p>
<ul>
<li>Agent Token (automatically generated)</li>
<li>Docker Run command</li>
<li>Docker Compose configuration</li>
</ul>
<p>Copy the agent token for the next step.</p>
<h3 class="anchor anchorWithStickyNavbar_PMiz" id="step-3-deploy-the-agent">Step 3: Deploy the Agent<a href="#step-3-deploy-the-agent" class="hash-link" aria-label="Direct link to Step 3: Deploy the Agent" title="Direct link to Step 3: Deploy the Agent">​</a></h3>
<p>You can run the agent in several ways:</p>
<h4 class="anchor anchorWithStickyNavbar_PMiz" id="option-1-direct-binary-execution">Option 1: Direct Binary Execution<a href="#option-1-direct-binary-execution" class="hash-link" aria-label="Direct link to Option 1: Direct Binary Execution" title="Direct link to Option 1: Direct Binary Execution">​</a></h4>
<ol>
<li>Download the agent binary for your platform from the <a href="https://github.com/mizuchilabs/mantrae/releases" target="_blank" rel="noopener noreferrer">releases page</a></li>
<li>Run the agent with the token:<!-- -->
<div class="language-bash codeBlockContainer_zshV theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_u8cg"><pre tabindex="0" class="prism-code language-bash codeBlock_GAGN thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZY7o"><span class="token-line" style="color:#393A34"><span class="token plain">TOKEN=YOUR_AGENT_TOKEN HOST=https://mantrae.example.com ./mantrae-agent</span><br></span></code></pre></div></div>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_PMiz" id="option-2-docker-run">Option 2: Docker Run<a href="#option-2-docker-run" class="hash-link" aria-label="Direct link to Option 2: Docker Run" title="Direct link to Option 2: Docker Run">​</a></h4>
<p>Use the pre-generated Docker run command from the agent configuration page:</p>
<div class="language-bash codeBlockContainer_zshV theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_u8cg"><pre tabindex="0" class="prism-code language-bash codeBlock_GAGN thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZY7o"><span class="token-line" style="color:#393A34"><span class="token plain">docker run -d \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --name mantrae-agent \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -e TOKEN=YOUR_AGENT_TOKEN \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -e HOST=https://mantrae.example.com \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -v /var/run/docker.sock:/var/run/docker.sock:ro \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ghcr.io/mizuchilabs/mantrae-agent:latest</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_PMiz" id="option-3-docker-compose">Option 3: Docker Compose<a href="#option-3-docker-compose" class="hash-link" aria-label="Direct link to Option 3: Docker Compose" title="Direct link to Option 3: Docker Compose">​</a></h4>
<p>Use the pre-generated Docker Compose configuration:</p>
<div class="language-yaml codeBlockContainer_zshV theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_u8cg"><pre tabindex="0" class="prism-code language-yaml codeBlock_GAGN thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZY7o"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">mantrae-agent</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ghcr.io/mizuchilabs/mantrae</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">agent</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">container_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mantrae</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">agent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">network_mode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> host</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> TOKEN=YOUR_AGENT_TOKEN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> HOST=https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//mantrae.example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /var/run/docker.sock</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/var/run/docker.sock</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">ro</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">restart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> unless</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">stopped</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_PMiz" id="using-traefik-labels-with-agents">Using Traefik Labels with Agents<a href="#using-traefik-labels-with-agents" class="hash-link" aria-label="Direct link to Using Traefik Labels with Agents" title="Direct link to Using Traefik Labels with Agents">​</a></h2>
<p>Once the agent is running, you can label your containers as you normally would with Traefik. The agent will automatically collect these labels and synchronize them with the Mantrae server.</p>
<h3 class="anchor anchorWithStickyNavbar_PMiz" id="example-http-service">Example HTTP Service<a href="#example-http-service" class="hash-link" aria-label="Direct link to Example HTTP Service" title="Direct link to Example HTTP Service">​</a></h3>
<div class="language-yaml codeBlockContainer_zshV theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_u8cg"><pre tabindex="0" class="prism-code language-yaml codeBlock_GAGN thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZY7o"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">whoami</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> containous/whoami</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;80:80&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;traefik.enable=true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;traefik.http.routers.whoami.rule=Host(`whoami.example.com`)&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;traefik.http.routers.whoami.entrypoints=websecure&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;traefik.http.routers.whoami.tls=true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;traefik.http.services.whoami.loadbalancer.server.port=80&quot;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_PMiz" id="agent-configuration-options">Agent Configuration Options<a href="#agent-configuration-options" class="hash-link" aria-label="Direct link to Agent Configuration Options" title="Direct link to Agent Configuration Options">​</a></h2>
<p>The agent supports several environment variables for configuration:</p>
<table><thead><tr><th>Variable</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>TOKEN</code></td><td>Agent token from Mantrae server</td><td>Required</td></tr><tr><td><code>HOST</code></td><td>Mantrae server URL</td><td><a href="http://localhost:3000" target="_blank" rel="noopener noreferrer">http://localhost:3000</a></td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_PMiz" id="network-configuration">Network Configuration<a href="#network-configuration" class="hash-link" aria-label="Direct link to Network Configuration" title="Direct link to Network Configuration">​</a></h2>
<p>Agents can automatically detect their network configuration:</p>
<ol>
<li><strong>Public IP Detection</strong>: Agents will automatically detect their public IP address</li>
<li><strong>Private Network</strong>: For internal networks, agents can use their private IP</li>
<li><strong>Manual Override</strong>: You can manually specify the IP address that should be used for services</li>
</ol>
<p>This information is visible in the agent details page in the Mantrae web interface.</p>
<h2 class="anchor anchorWithStickyNavbar_PMiz" id="monitoring-agent-status">Monitoring Agent Status<a href="#monitoring-agent-status" class="hash-link" aria-label="Direct link to Monitoring Agent Status" title="Direct link to Monitoring Agent Status">​</a></h2>
<p>In the Mantrae web interface, you can:</p>
<ul>
<li>View the status of all agents (online/offline)</li>
<li>See when each agent last synchronized</li>
<li>View the containers discovered by each agent</li>
<li>Rotate agent tokens for security</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_PMiz" id="security-considerations">Security Considerations<a href="#security-considerations" class="hash-link" aria-label="Direct link to Security Considerations" title="Direct link to Security Considerations">​</a></h2>
<ul>
<li>Each agent has a unique token that should be kept secret</li>
<li>Tokens can be rotated at any time from the web interface</li>
<li>Agents only need read-only access to the Docker socket</li>
</ul></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/mantrae/usage/dns"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">DNS Providers</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/mantrae/usage/environment"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Environment Variables</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_uNks thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-agents-work" class="table-of-contents__link toc-highlight">How Agents Work</a></li><li><a href="#setting-up-an-agent" class="table-of-contents__link toc-highlight">Setting Up an Agent</a><ul><li><a href="#step-1-create-an-agent-in-mantrae" class="table-of-contents__link toc-highlight">Step 1: Create an Agent in Mantrae</a></li><li><a href="#step-2-copy-the-agent-token" class="table-of-contents__link toc-highlight">Step 2: Copy the Agent Token</a></li><li><a href="#step-3-deploy-the-agent" class="table-of-contents__link toc-highlight">Step 3: Deploy the Agent</a></li></ul></li><li><a href="#using-traefik-labels-with-agents" class="table-of-contents__link toc-highlight">Using Traefik Labels with Agents</a><ul><li><a href="#example-http-service" class="table-of-contents__link toc-highlight">Example HTTP Service</a></li></ul></li><li><a href="#agent-configuration-options" class="table-of-contents__link toc-highlight">Agent Configuration Options</a></li><li><a href="#network-configuration" class="table-of-contents__link toc-highlight">Network Configuration</a></li><li><a href="#monitoring-agent-status" class="table-of-contents__link toc-highlight">Monitoring Agent Status</a></li><li><a href="#security-considerations" class="table-of-contents__link toc-highlight">Security Considerations</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/mantrae/intro">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/mantrae/usage/profiles">Usage</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://mizuchi.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Mizuchi Labs</a></li><li class="footer__item"><a href="https://github.com/mizuchilabs/mantrae" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_dOxH"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Mizuchi Labs, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>