// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.29.0
// source: servers_transport.sql

package db

import (
	"context"
	"time"

	"github.com/mizuchilabs/mantrae/internal/store/schema"
)

const countServersTransportsByAgent = `-- name: CountServersTransportsByAgent :one
SELECT
  COUNT(*)
FROM
  http_servers_transports
WHERE
  http_servers_transports.agent_id = ?
UNION ALL
SELECT
  COUNT(*)
FROM
  tcp_servers_transports
WHERE
  tcp_servers_transports.agent_id = ?
`

type CountServersTransportsByAgentParams struct {
	AgentID   *string `json:"agentId"`
	AgentID_2 *string `json:"agentId2"`
}

func (q *Queries) CountServersTransportsByAgent(ctx context.Context, arg CountServersTransportsByAgentParams) (int64, error) {
	row := q.queryRow(ctx, q.countServersTransportsByAgentStmt, countServersTransportsByAgent, arg.AgentID, arg.AgentID_2)
	var count int64
	err := row.Scan(&count)
	return count, err
}

const countServersTransportsByProfile = `-- name: CountServersTransportsByProfile :one
SELECT
  COUNT(*)
FROM
  http_servers_transports
WHERE
  http_servers_transports.profile_id = ?
UNION ALL
SELECT
  COUNT(*)
FROM
  tcp_servers_transports
WHERE
  tcp_servers_transports.profile_id = ?
`

type CountServersTransportsByProfileParams struct {
	ProfileID   int64 `json:"profileId"`
	ProfileID_2 int64 `json:"profileId2"`
}

func (q *Queries) CountServersTransportsByProfile(ctx context.Context, arg CountServersTransportsByProfileParams) (int64, error) {
	row := q.queryRow(ctx, q.countServersTransportsByProfileStmt, countServersTransportsByProfile, arg.ProfileID, arg.ProfileID_2)
	var count int64
	err := row.Scan(&count)
	return count, err
}

const listServersTransportsByAgent = `-- name: ListServersTransportsByAgent :many
SELECT
  id, profile_id, agent_id, name, config, enabled, created_at, updated_at,
  'http' AS type
FROM
  http_servers_transports
WHERE
  http_servers_transports.agent_id = ?
UNION ALL
SELECT
  id, profile_id, agent_id, name, config, enabled, created_at, updated_at,
  'tcp' AS type
FROM
  tcp_servers_transports
WHERE
  tcp_servers_transports.agent_id = ?
ORDER BY
  name
LIMIT
  ?
OFFSET
  ?
`

type ListServersTransportsByAgentParams struct {
	AgentID   *string `json:"agentId"`
	AgentID_2 *string `json:"agentId2"`
	Limit     int64   `json:"limit"`
	Offset    int64   `json:"offset"`
}

type ListServersTransportsByAgentRow struct {
	ID        int64                    `json:"id"`
	ProfileID int64                    `json:"profileId"`
	AgentID   *string                  `json:"agentId"`
	Name      string                   `json:"name"`
	Config    *schema.ServersTransport `json:"config"`
	Enabled   bool                     `json:"enabled"`
	CreatedAt *time.Time               `json:"createdAt"`
	UpdatedAt *time.Time               `json:"updatedAt"`
	Type      string                   `json:"type"`
}

func (q *Queries) ListServersTransportsByAgent(ctx context.Context, arg ListServersTransportsByAgentParams) ([]ListServersTransportsByAgentRow, error) {
	rows, err := q.query(ctx, q.listServersTransportsByAgentStmt, listServersTransportsByAgent,
		arg.AgentID,
		arg.AgentID_2,
		arg.Limit,
		arg.Offset,
	)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []ListServersTransportsByAgentRow
	for rows.Next() {
		var i ListServersTransportsByAgentRow
		if err := rows.Scan(
			&i.ID,
			&i.ProfileID,
			&i.AgentID,
			&i.Name,
			&i.Config,
			&i.Enabled,
			&i.CreatedAt,
			&i.UpdatedAt,
			&i.Type,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listServersTransportsByProfile = `-- name: ListServersTransportsByProfile :many
SELECT
  id, profile_id, agent_id, name, config, enabled, created_at, updated_at,
  'http' AS type
FROM
  http_servers_transports
WHERE
  http_servers_transports.profile_id = ?
UNION ALL
SELECT
  id, profile_id, agent_id, name, config, enabled, created_at, updated_at,
  'tcp' AS type
FROM
  tcp_servers_transports
WHERE
  tcp_servers_transports.profile_id = ?
ORDER BY
  name
LIMIT
  ?
OFFSET
  ?
`

type ListServersTransportsByProfileParams struct {
	ProfileID   int64 `json:"profileId"`
	ProfileID_2 int64 `json:"profileId2"`
	Limit       int64 `json:"limit"`
	Offset      int64 `json:"offset"`
}

type ListServersTransportsByProfileRow struct {
	ID        int64                    `json:"id"`
	ProfileID int64                    `json:"profileId"`
	AgentID   *string                  `json:"agentId"`
	Name      string                   `json:"name"`
	Config    *schema.ServersTransport `json:"config"`
	Enabled   bool                     `json:"enabled"`
	CreatedAt *time.Time               `json:"createdAt"`
	UpdatedAt *time.Time               `json:"updatedAt"`
	Type      string                   `json:"type"`
}

func (q *Queries) ListServersTransportsByProfile(ctx context.Context, arg ListServersTransportsByProfileParams) ([]ListServersTransportsByProfileRow, error) {
	rows, err := q.query(ctx, q.listServersTransportsByProfileStmt, listServersTransportsByProfile,
		arg.ProfileID,
		arg.ProfileID_2,
		arg.Limit,
		arg.Offset,
	)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []ListServersTransportsByProfileRow
	for rows.Next() {
		var i ListServersTransportsByProfileRow
		if err := rows.Scan(
			&i.ID,
			&i.ProfileID,
			&i.AgentID,
			&i.Name,
			&i.Config,
			&i.Enabled,
			&i.CreatedAt,
			&i.UpdatedAt,
			&i.Type,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}
